# Module Creation Template
> **Instructions:** Just fill in the basics below. The AI will figure out everything else (descriptions, icons, positioning, formatting, etc.)


---

## Required Info

**Module Name:**
14 - Phase 1 Final Exam

**Section:**
Phase 1

**Position:**
After 13


**Video URL:**


**Quiz Questions:**

(Note: For questions with images, use format: https://0cm.classmarker.com/10742032_TNJF0ZXE.png - replace the slug with what's referenced in [cmimg] tags)
(Type): multiplechoice
(Category): 151
(Random answers): 1
(Question): MRI system performance and _____________ of an MRI system cannot be determined by looking at it.
(A): Noise level (dB)
(B): Magnetic field strength
(C): Software and hardware configuration
(D): Pulse sequences
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): In MRI, the human body and the MRI system act together as:
(A): A magnet
(B): An acoustic transmitter
(C): An x-ray receiver
(D): A radio receiver transmitter
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): MRI of the human body depends solely upon:
(A): The magnetic field strength
(B): Sound waves
(C): Iron molecules
(D): Water-bond hydrogen protons
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): In MRI, a frequency that drives the energy transfer from the RF transmitter to the body is referred to as :
(A): Resonant Frequency
(B): Resonant C-tuning Frequency
(C): Resonant phase
(D): Resonant proton
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 156
(Random answers): 1
(Question): One reason that MRI is exceptionally safe because it_____________.
(A): Uses extremely low doses of ionizing radiation
(B): Has no ionizing radiation
(C): It is painless
(D): Requires patients to hold very still
(Correct): B
(Points): 1


(Type): truefalse
(Category): 156
(Random answers): 0
(Question): Some ferrous items are allowed in the magnet room under controlled circumstances. 
(A): TRUE
(B): FALSE
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): Magnetic fields are measured in Gauss and Tesla units.                    5000 Gauss = _________.
(A): 0.005 Tesla
(B): 0.05 Tesla
(C):  .5 Tesla
(D): 5.0 Tesla
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 151
(Random answers): 1
(Question): Superconductive MRI magnets have potentially highest performance and highest field strength compared to other magnet types. Another advantage is:
(A): A very high resistance to electrical current
(B): Has virtually no electrical resistance at all
(C): It produces the least acoustic noise
(D): It produces images using only sound waves
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 151
(Random answers): 1
(Question): The process of liquid helium explosively turning gaseous is referred to as a:
(A): quench
(B): superconductivity
(C): dephasing
(D): ramping
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 151
(Random answers): 1
(Question): In a superconductive magnet, the cryostat is filled with:
(A): Gaseous helium
(B): Gaseous hydrogen
(C): Liquid helium
(D): Liquid hydrogen
(Correct): C
(Points): 1


(Type): truefalse
(Category): 156
(Random answers): 0
(Question): Though extremely rare, patients have been seriously injured and killed due to MRI mistakes.
(A): TRUE
(B): FALSE
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 156
(Random answers): 1
(Question): As ferrous objects get closer to the magnet, the force pulling on the object:
(A): Greatly decreases
(B): Greatly increases
(C): Is the same because the mass of the ferrous material is constant
(D): Pushed the object away from the magnet due to opposite charges
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 156
(Random answers): 1
(Question): The most common MRI-related injury is/are:
(A): Hearing damage
(B): Radio-frequency burns
(C): Cryogen burns
(D): Moving metal
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 156
(Random answers): 1
(Question): One important method for greatly reducing the risk of an RF burn is:
(A): Make sure the Pt has ear plugs
(B): Prevent skin touching the inside the magnet bore with cushions
(C): Do not let a patient wear their shoes into the magnet
(D): Make sure the patient as an emergency call squeeze ball
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 156
(Random answers): 1
(Question): In MRI, any type of metal can be a cause for concern. The 3 main concerns about any metal are if it: accelerates toward the magnetic field; can cause an image artifact; and ___________________:
(A): Make the MRI system louder
(B): Break the MRI system
(C): Absorb radio-frequency energy and may get hot
(D): Accelerate into the magnet bore
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): The radio-frequency energy transmitted to the patient over time is referred to as  ____________ , or SAR.
(A): Signal Absorption Rate
(B): Safe Absorption Rate
(C): Selective Absorption Rate
(D): Specific Absorption Rate
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): Concerning the answer above, SAR is measured in___________:
(A): Watts/milligram
(B): Watts/Hertz
(C): Watts/kilogram
(D): Watts/pound
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 156
(Random answers): 1
(Question): The noise of an MRI system arises from ___________________.
(A): functioning gradients
(B): radio-frequency transmission
(C): radio-frequency absorption
(D): circulating cryogens
(Correct): A
(Points): 1


(Type): truefalse
(Category): 156
(Random answers): 0
(Question): Hearing protection is an absolute requirement for patients without exception.
(A): TRUE
(B): FALSE
(Correct): A
(Points): 1


(Type): truefalse
(Category): 156
(Random answers): 0
(Question): Patients may refuse hearing protection if they assume legal responsibility for any hearing damage or hearing loss.
(A): TRUE
(B): FALSE
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 156
(Random answers): 1
(Question): The person with the most control, and therefore responsibility, for a patient's safety is:
(A): The MRI supervisor
(B): The lead radiologist
(C): The patient him/herself
(D): The patient's MRI technologist
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 154
(Random answers): 1
(Question): HIPAA stands for ______________________.
(A): Health Insurance Privacy and Accountability Act
(B): Health Information Privacy and Accountability Act
(C): Health Insurance Portability and Accountability Act
(D): Health Information Portability and Accountability Act
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 154
(Random answers): 1
(Question): PHI stands for ____________________.
(A): Privacy of Health Information
(B): Public Health Information
(C): Public Health Institute
(D): Protected Health Information
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 150
(Random answers): 1
(Question): The study of the body's functions and structure is referred as _______.
(A): Physiology
(B): Biology
(C): Pathology
(D): Biochemistry
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 150
(Random answers): 1
(Question): The study of diseases and their processes is referred to as: ________.
(A): Immunology
(B): Biochemistry
(C): Organic Chemistry
(D): Pathology
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 150
(Random answers): 1
(Question): The three orthogonal planes on the body in MRI are_______________.
(A): Superior, Inferior, and Co-Axial
(B): Medial, Lateral, and Superior
(C): Axial, Sagittal, and Posterior
(D): Axial, Sagittal, and Coronal
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 150
(Random answers): 1
(Question): A plane of the body that is not an orthogonal plane is referred to as ________________.
(A): Medial
(B): Lateral
(C): Co-Axial
(D): Oblique
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 150
(Random answers): 1
(Question): Which of the following is an example of a nervous system pathology?
(A): Multiple Sclerosis
(B): Lower back pain
(C): Osteosarcoma
(D): Hepatitis
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 150
(Random answers): 1
(Question): Which of the following is an example of a skeletal system pathology?
(A): Alzheimer's
(B): Myocardial infarction
(C): Osteosarcoma
(D): Hepatitis
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 150
(Random answers): 1
(Question): Cells are organized and share a common function give rise to________.
(A): Tissue
(B): Organs
(C): Systems
(D): Anatomy
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 155
(Random answers): 1
(Question): Image sharpness or detail best describes ________________.
(A): Spatial resolution
(B): Signal-to-Noise Ratio (SNR)
(C): Image contrast
(D): Temporal resolution
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 155
(Random answers): 1
(Question): Which of the following does not contribute to an image's spatial resolution?
(A): Slice thickness
(B): Voxel number
(C): Field-of-View (FOV)
(D): Signal-to-Noise ratio (SNR)
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 153
(Grade style): 0
(Random answers): 1
(Question): Which of the following contributes to an image's contrast? (Circle all the apply.)
(A): SNR and TR
(B): TR and TE
(C): SNR and TE
(D): Phase and Frequency encoding
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): The three main types of image contrast are_______________.
(A): Signal-to-noise ratio (SNR), TR, and TE
(B): T1, T2 and Spatial resolution
(C): T1, T2, and Proton Density
(D): Spatial resolution, Signal-to-noise ratio (SNR), Contrast
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): Maximizing one type of image contrast while minimizing the other two is referred to as________________.
(A): Spatial resolution
(B): Signal-to-Noise ratio (SNR)
(C): Image Weighting
(D): Image Contrast
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): T1 refers to a tissue's time for ___% of its ____________ magnetization to recover.
(A): 63%, transverse
(B): 63%, longitudinal
(C): 37%, T2
(D): 37%, T1
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): T2 refers to a tissue's time for ___% of its ____________ magnetization to decay.
(A): 63%, transverse
(B): 63%, longitudinal
(C): 37%, T2
(D): 37%, T1
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): The number of a tissue's mobile protons that contribute to MRI signal is described as the tissue's:
(A): T1
(B): T2
(C): Proton Density
(D): Image contrast
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_OGUEMC2V.png[/cmimg]What is the most likely contrast of this image?
(A): T1 weighted
(B): T2 weighted
(C): Proton density weighted
(D): High SNR
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_SZ9YN1VX.png[/cmimg]What is the most likely contrast of the image?
(A): T1 weighted
(B): T2 weighted
(C): Proton density weighted
(D): High SNR
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_MHIX0LZO.png[/cmimg]Referring to the figure above, this is a  _____________  curve.
(A): T1
(B): T2
(C): Proton Density
(D): Signal-to-Noise contrast
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_MHIX0LZO.png[/cmimg]Referring to the figure above, which tissue has the shorter T1 ?
(A): A
(B): B
(C): Cannot be determined
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_MHIX0LZO.png[/cmimg]Referring to figure above which tissue has the longer T2?
(A): A
(B): B
(C): Cannot be determined
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_VLJCXDVO.png[/cmimg]Referring to the figure above, this is a _____________ curve.
(A): T1
(B): T2
(C): Proton Density
(D): Signal-to-Noise contrast
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_VLJCXDVO.png[/cmimg]Referring to the figure above, which tissue has the shorter T2?
(A): A
(B): B
(C): Cannot be determined
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_VLJCXDVO.png[/cmimg]Referring to the figure above, which tissue has the shorter T1?
(A): A
(B): B
(C): Cannot be determined
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_9N7RXC0D.png[/cmimg]Referring to the figure above, at what point in time is the least contrast between the 2 tissues.
(A): A
(B): B
(C): C
(D): Cannot be determined
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 153
(Random answers): 1
(Question): [cmimg]0/10742032_9N7RXC0D.png[/cmimg]Referring to the figure above, given your answer to Q47, what is the most likely contrast weighting of the obtained image? (think carefully)
(A): T1
(B): T2
(C): Proton density
(D): Cannot be determined
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): To sample the signal in MRI, the spins must be in the ___________ plane.
(A): Longitudinal
(B): Transverse
(C): =-Z
(D): =+Z
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 153
(Grade style): 0
(Random answers): 1
(Question): TR is: (Select all that apply)
(A): Repetition Time
(B): Time allowed for T1 recovery
(C): Time allowed for T2 decay
(D): The time from the beginning of one pulse sequence to the beginning of the next
(Correct): A,B,D
(Points): 1


(Type): multiplechoice
(Category): 153
(Grade style): 0
(Random answers): 1
(Question): TE is: (Select all that apply)
(A): Time to Echo
(B): Time allowed for T1 recovery
(C): Time allowed for T2 decay
(D): The time from the beginning of a pulse sequence until the generated echo signal.
(Correct): A,C,D
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): Fat is bright on a T1W image because it has a _______________ T1 time.
(A): Short
(B): Long
(C): Moderate
(D): Proton Density
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): Cerebral Spinal Fluid (CSF) is dark on a T1W image because it has a ________ T1 time.
(A): Short
(B): Long
(C): Moderate
(D): Proton Density
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 152
(Random answers): 1
(Question): Cerebral Spinal Fluid (CSF) is bright on a T2W image because it has a ________ T2 time.
(A): Short
(B): Long
(C): Moderate
(D): Proton Density
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 152
(Grade style): 0
(Random answers): 1
(Question): Compact bone is dark on both T1W and T2W imaging because: (Select all that apply.)
(A): It has very few mobile protons
(B): It has little to no water
(C): It has an exceptionally long T2
(D): It has an exceptionally long T1
(Correct): A,B
(Points): 1


**Document URL:**

---

## Optional Notes

---

## Example

**Module Name:**
Physics of MRI

**Section:**
Phase 1

**Position:**
after Introduction to MRI

**Video URL:**
https://xyz.supabase.co/storage/v1/object/public/videos/mri-physics.mp4

**Quiz Questions:**
1. What is the primary magnetic field strength in most clinical MRI scanners?
a) 0.5 Tesla
b) 1.5 Tesla
c) 3.0 Tesla
d) Both b and c
Answer: d

2. MRI uses ionizing radiation - True or False
Answer: False

**Document URL:**

**Optional Notes:**
Make sure to emphasize safety aspects

---

## What Happens Next

Give this to the AI and it will automatically do everything!

---

## AI PROCESSING INSTRUCTIONS (For the AI Assistant)

When a user provides a filled-out template, follow these steps IN ORDER:

### Step 1: Parse & Understand
1. Read the filled template carefully
2. Identify what content types exist (video/quiz/document)
3. Note the target section and position
4. Check if there are any special notes

### Step 2: Query Existing Structure
1. Check the database for existing sections and their IDs
2. Query all modules in the target section to determine order_index
3. If position is "first", set order_index = 1
4. If position is "after [module name]", find that module's order_index and add 1
5. If position is "at the end", find max order_index and add 1

### Step 3: Generate Module Details
1. **Create slug**: Convert module name to lowercase-kebab-case
2. **Write description**: Create compelling 1-2 sentence description of what students will learn
3. **Choose icon**: Pick a perfect emoji that represents the topic
4. **Set published**: Default to true unless user specified otherwise

### Step 4: Process Content Items
For each content type present:

**If Video:**
- Generate video title (based on module name if not provided)
- Create description
- Set type: "video"
- Create slug: "introduction" or meaningful name
- Store video URL in metadata.videoUrl
- Set order_index: 1

**If Quiz:**
- Parse questions from ANY format provided
- Intelligently detect: question text, answers, correct answer, explanations
- If multiple choice: extract options A/B/C/D
- If true/false: detect boolean questions
- Generate question IDs (slugs)
- Create JSON structure with proper format
- Determine if multiple quiz sections needed (or just one)
- Create quiz slugs: "fundamentals", "basics", etc.
- Set order_index appropriately
- **ARCHITECTURE**: 
  - Quiz question data (text, answers, correct answer, image URL) → Database
  - Hints and explanations → JSON files in `/public/data/quiz-hints/`
  - This allows fast editing of hints/explanations without database migrations
- **IMPORTANT**: Generate hints and explanations in this EXACT style:

**NOTE:** These examples show the structure. Parse user's messy input and transform it into this format.

**MULTIPLE CHOICE EXAMPLE:**

**Database (quiz_questions table):**
```sql
-- Question data only (no hints/explanations in DB)
INSERT INTO quiz_questions (
  content_item_id, 
  question_id, 
  section_key, 
  question_type, 
  question_text, 
  answers, 
  correct_answer, 
  points, 
  order_index,
  image_url
) VALUES (
  v_quiz_content_id, 
  'suf-8', 
  'suffixes', 
  'multiplechoice', 
  'The suffix "-megaly" means:', 
  '{"A": "Pain", "B": "Inflammation", "C": "Disease", "D": "Enlargement"}', 
  'D', 
  1, 
  0,
  null
);
```

**JSON File (`/public/data/quiz-hints/XX-suffixes.json`):**
```json
{
  "suf-8": {
    "question_type": "multiplechoice",
    "question_text": "The suffix \"-megaly\" means:",
    "answers": {
      "A": "Pain",
      "B": "Inflammation",
      "C": "Disease",
      "D": "Enlargement"
    },
    "correct_answer": "D",
    "hint": "Think MEGA - like mega-size, mega-big!",
    "explanation": "**-megaly** means **enlargement** or **abnormally large** 📏\n\n💡 **Remember it:** -MEGALY starts with MEGA - like MEGA-SIZE at McDonald's, or MEGA-blocks - it means BIG! Cardiomegaly = enlarged heart. Hepatomegaly = enlarged liver. Splenomegaly = enlarged spleen. Whenever you see -MEGALY, something grew too BIG, like it got MEGA-SIZED!"
  }
}
```

**TRUE/FALSE EXAMPLE:**

**Database:**
```sql
INSERT INTO quiz_questions (
  content_item_id, question_id, section_key, question_type, 
  question_text, answers, correct_answer, points, order_index, image_url
) VALUES (
  v_quiz_content_id, 'suf-17', 'suffixes', 'truefalse', 
  'The suffix "-lysis" means hardening.', 
  '{"A": "True", "B": "False"}', 'B', 1, 1, null
);
```

**JSON File:**
```json
{
  "suf-17": {
    "question_type": "truefalse",
    "question_text": "The suffix \"-lysis\" means hardening.",
    "answers": {
      "A": "True",
      "B": "False"
    },
    "correct_answer": "B",
    "hint": "Think of Listerine dissolving plaque - breaking things DOWN!",
    "explanation": "**FALSE!** ❌ **-lysis** means **breakdown** or **destruction**, NOT hardening!\n\n💡 **Remember it:** -LYSIS sounds like 'LIES-IS' (falling apart)! Think of things DISSOLVING, BREAKING DOWN, LOOSENING! Hemolysis = breakdown of red blood cells. Dialysis = breaking down/filtering waste from blood. Paralysis = breakdown of muscle function. The opposite of hardening - it's about things FALLING APART or being DESTROYED!"
  }
}
```

**EXAMPLE WITH IMAGE:**

**Database:**
```sql
INSERT INTO quiz_questions (
  content_item_id, question_id, section_key, question_type, 
  question_text, answers, correct_answer, points, order_index, image_url
) VALUES (
  v_quiz_content_id, 'neuro-brain-anatomy-1', 'neuro-procedures-fundamentals', 'multiplechoice', 
  'What structure is indicated by the arrow in this sagittal brain MRI?', 
  '{"A": "Cerebellum", "B": "Medulla oblongata", "C": "Pons", "D": "Thalamus"}', 
  'A', 1, 0, 
  'https://cffhrzzfhyotkbuuoayc.supabase.co/storage/v1/object/public/quiz-images/brain-sagittal-cerebellum.jpg'
);
```

**JSON File:**
```json
{
  "neuro-brain-anatomy-1": {
    "question_type": "multiplechoice",
    "question_text": "What structure is indicated by the arrow in this sagittal brain MRI?",
    "answers": {
      "A": "Cerebellum",
      "B": "Medulla oblongata",
      "C": "Pons",
      "D": "Thalamus"
    },
    "correct_answer": "A",
    "hint": "Look at the posterior fossa - it's the largest structure there!",
    "explanation": "**Cerebellum** - the little brain! 🧠\n\n💡 **Remember it:** CEREBELLUM = 'little brain' in Latin. It sits in the posterior fossa (back of skull) below the occipital lobes. It's responsible for coordination, balance, and fine motor control. On sagittal MRI, it has a characteristic 'tree-like' appearance called the arbor vitae (tree of life)!"
  }
}
```

**STYLE GUIDELINES:**
- **Hints**: Short, memorable, relatable (use everyday comparisons, wordplay, mnemonics)
- **Explanations**: 
  - Start with bold definition and emoji
  - Add "💡 **Remember it:**" section with creative memory aids
  - Use real-world examples (McDonald's, brands, everyday objects)
  - Include clinical examples when relevant
  - Use formatting: **bold**, CAPS for emphasis
  - Make it FUN and MEMORABLE - like teaching a friend!
- **Images**: 
  - Set `image_url` to `null` if no image needed (most questions)
  - Use Supabase Storage URLs when images are provided
  - Common use cases: anatomical diagrams, MRI scans, positioning photos, equipment images
  - Images will display above the question text in the quiz interface

**If Document:**
- Generate document title
- Create description
- Set type: "document"
- Create slug
- Store URL in metadata.documentUrl
- Set order_index appropriately

### Step 5: Create SQL Migration File
Generate a new migration file: `XXX_add_[module-slug]_module.sql`

Include:
```sql
-- Get section ID
DO $$
DECLARE
  v_section_id UUID;
  v_module_id UUID;
  v_video_content_id UUID;
  v_quiz_content_id UUID;
BEGIN
  -- Get section ID
  SELECT id INTO v_section_id FROM sections WHERE slug = '[section-slug]';
  
  -- Insert module (or UPDATE if it already exists)
  INSERT INTO modules (section_id, slug, title, description, icon, order_index, is_published, is_locked)
  VALUES (v_section_id, '[module-slug]', '[Module Name]', '[Description]', '[Emoji]', [order_index], true, false)
  RETURNING id INTO v_module_id;
  
  -- OR if updating an existing module:
  -- UPDATE modules
  -- SET
  --   title = '[Module Name]',
  --   description = '[Description]',
  --   icon = '[Emoji]',
  --   is_published = true,
  --   is_locked = false,
  --   updated_at = NOW()
  -- WHERE section_id = v_section_id AND slug = '[module-slug]'
  -- RETURNING id INTO v_module_id;
  
  -- Insert video content (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, 'introduction', '[Video Title]', '[Description]', 'video', '🎥', 1, '{"videoUrl": "[URL]"}', true)
  RETURNING id INTO v_video_content_id;
  
  -- Insert quiz content (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, '[quiz-slug]', '[Quiz Title]', '[Description]', 'quiz', '📝', 2, '{}', true)
  RETURNING id INTO v_quiz_content_id;
  
  -- Insert or update quiz_sections (IMPORTANT: Do this BEFORE inserting questions!)
  INSERT INTO quiz_sections (key, title, description, icon, order_index)
  VALUES ('[quiz-slug]', '[Quiz Section Title]', '[Description]', '📝', 0)
  ON CONFLICT (key) DO UPDATE SET
    title = EXCLUDED.title,
    description = EXCLUDED.description,
    icon = EXCLUDED.icon,
    order_index = EXCLUDED.order_index,
    updated_at = NOW();
  
  -- Insert quiz questions (question data ONLY - no hints/explanations in DB!)
  INSERT INTO quiz_questions (
    content_item_id, 
    question_id, 
    section_key, 
    question_type, 
    question_text, 
    answers, 
    correct_answer, 
    points, 
    order_index,
    image_url
  ) VALUES 
    (v_quiz_content_id, 'question-1', '[quiz-slug]', 'multiplechoice', 'What is...?', '{"A": "Option A", "B": "Option B", "C": "Option C", "D": "Option D"}', 'A', 1, 0, null),
    (v_quiz_content_id, 'question-2', '[quiz-slug]', 'truefalse', 'The term means hardening.', '{"A": "True", "B": "False"}', 'B', 1, 1, null),
    (v_quiz_content_id, 'question-3', '[quiz-slug]', 'multiplechoice', 'What structure is indicated by the arrow?', '{"A": "Cerebellum", "B": "Medulla", "C": "Pons", "D": "Thalamus"}', 'A', 1, 2, 'https://xyz.supabase.co/storage/v1/object/public/quiz-images/brain-sagittal.jpg')
    -- ... more questions (include image_url only if image is provided, otherwise null)
  ;
  
  -- Insert document (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, 'reading', '[Doc Title]', '[Description]', 'document', '📄', 3, '{"documentUrl": "[URL]"}', true);
  
END $$;
```

**CRITICAL REMINDERS:**
- Always escape single quotes in text fields: `It''s` not `It's`
- Insert quiz_sections BEFORE quiz_questions (foreign key constraint!)
- Use proper JSON format for answers: `'{"A": "text", "B": "text"}'`
- Variable names must use underscores not hyphens: `v_quiz_content_id` not `v_quiz-content-id`
- Include `image_url` column in INSERT statements (set to `null` if no image)
- **ALWAYS set `is_locked = false`** when publishing a module (or it will show as locked in sidebar!)
- **DO NOT include `hint` or `explanation` columns in INSERT statements** - those go in JSON files only!

### Step 6: Create JSON Hint File
1. Determine the numbered filename (e.g., `11-[quiz-slug].json` for the 11th quiz)
2. Create file at `/public/data/quiz-hints/XX-[quiz-slug].json`
3. Structure: `{ "question-id": { ...question data with hint & explanation... } }`
4. Include ALL question context (question_text, answers, correct_answer) for easy editing
5. Write fun, memorable hints and explanations following the style guide above

### Step 7: Update Quiz Mappings
**CRITICAL:** Add the new quiz to the icon and file number mappings in:
1. `/app/[section]/[module]/quiz/[slug]/page.tsx`:
   - Add to `QUIZ_ICONS` object with appropriate emoji
   - Add to `QUIZ_FILE_NUMBERS` object with the numbered file (e.g., '11')
2. `/app/admin/quizzes/page.tsx`:
   - Add to `QUIZ_FILE_NUMBERS` object with the same number

Example:
```typescript
const QUIZ_ICONS: Record<string, string> = {
  // ... existing quizzes
  'subatomic-principles-fundamentals': '⚛️',
};

const QUIZ_FILE_NUMBERS: Record<string, string> = {
  // ... existing quizzes
  'subatomic-principles-fundamentals': '11',
};
```

### Step 8: Execute Migration
1. Save the SQL migration file
2. Ask user to confirm before running
3. Run the migration: Connect to Supabase and execute SQL
4. Verify: Query to confirm module, content_items, quiz_sections, and quiz_questions were created

### Step 9: Verify Everything Works
1. Check that module appears in sidebar
2. Verify video page loads (if exists)
3. Verify quiz page loads with questions FROM DATABASE (if exists)
4. **Verify quiz answers display as text, not JSON characters** (check for JSON parsing)
5. Check server logs to confirm questions are loading from DB
6. Check that hints/explanations are loading from JSON file
7. Verify document page loads (if exists)
8. Test navigation between content items
9. Confirm progress tracking works in admin dashboard

### Step 10: Report Back
Provide summary:
- ✅ Module created: [name]
- ✅ Position: [section] at order_index [X]
- ✅ Content items: [list with types]
- ✅ Quiz questions: [count] stored in database
- ✅ Hints/Explanations: JSON file created at `/public/data/quiz-hints/XX-[quiz-slug].json`
- ✅ Migration file: [filename]
- ✅ Database verified: quiz_sections + quiz_questions populated
- ✅ All verified and working!

---

**IMPORTANT REMINDERS FOR AI:**
- Always use UUIDs properly with gen_random_uuid()
- Always check existing order_index values before assigning
- Parse quiz questions intelligently - handle messy formatting
- Generate meaningful slugs (lowercase-kebab-case)
- Create proper metadata JSON for videos/documents
- **QUIZ ARCHITECTURE**: Question data goes in database, hints/explanations go in JSON files at `/public/data/quiz-hints/`
- Include hints and explanations for EVERY quiz question in the fun, memorable style shown above
- Create numbered JSON hint files (01-slug.json, 02-slug.json, etc.) in correct order
- Include full question context in JSON files for easy editing by admins
- **ALWAYS update quiz mappings** in both quiz page and admin page (QUIZ_ICONS and QUIZ_FILE_NUMBERS)
- **Database answers are JSON strings** - they're already parsed in the quiz page code, so just insert as JSON strings in SQL
- Verify quiz questions load from database (check server logs)
- Verify hints/explanations load from JSON files
- **Verify quiz answers display as text, not raw JSON characters**
- Test everything before confirming completion
- If anything is unclear, ASK the user before proceeding

