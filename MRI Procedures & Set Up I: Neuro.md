# Module Creation Template

> **Instructions:** Just fill in the basics below. The AI will figure out everything else (descriptions, icons, positioning, formatting, etc.)

---

## Required Info

**Module Name:**
MRI Procedures & Set Up I: Neuro

**Section:**
Phase 1

**Position:**
Where u see it now, below MRI Safety II and above MRI body

**Video URL:**
https://cffhrzzfhyotkbuuoayc.supabase.co/storage/v1/object/public/videos/MRI%20Procedures%20&%20Set%20Up%20I%20-%20Neuro.mp4

**Quiz Questions:**
(Note: For questions with images, use format: https://0cm.classmarker.com/10742032_TNJF0ZXE.png - replace the slug with what's referenced in [cmimg] tags)

(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The anatomical point that establishes the what part of the body moves to the center of the magnet at the start of an MR exam is the:
(A): Pule Sequence
(B): Landmark
(C): Field-of-View
(D): None of the Above¬†
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): In MRI, a ‚Äúprotocol‚Äù is best defined as:
(A): The complete list of all the imaging pulse sequences and parameters in the entire MRI exam
(B): The body part to be imagined and the reason for the exam found on the physician‚Äôs order
(C): The written patient screening policy
(D): None of the above
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The 2-dimensional area to be imagined in a particular pulse sequence is the:
(A): Slice Thickness
(B): Slice Gap
(C): Field-of-View (FOV)¬†
(D): Image Weighting¬†
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The type of MR image contrast that has the strongest influence in the image is referred to as its:
(A): Image weighting¬†
(B): T1 weighting¬†
(C): T2 Weighting
(D): Voxel Brightness¬†
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 18
(Grade style): 0
(Random answers): 0
(Question): All of the following are indications for imaging the brain except for:
(A): Multiple Sclerosis¬†
(B): Loss of Balance
(C): Loss of Hearing
(D): Herniated Nucleus Pulposus (HNP)
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The landmark of brain imaging is the nasion or the _____________.
(A): Tip of the nose¬†
(B): Glabella¬†
(C): Tip of the Chin
(D): Angle of the mandible¬†
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The typical coverage for axial imaging of the brain is _____________
(A): C1 to the Calvarium¬†
(B): C1 to the ACPC line
(C): Foramen Magnum to superior sagittal sinus
(D): Foramen Magnum to the Calvarium
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): All of the following are indications for imaging the spine except for:
(A): Multiple Sclerosis¬†
(B): Tumor¬†
(C): Degenerative disk disease (DDD)
(D): Chest Pain
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The typical landmark for the cervical spine is the____________.
(A): Base of the skull
(B): Base of the Chin
(C): Nasion¬†
(D): Mandible¬†
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): Typical angulation for axial imaging of the cervical spine is _________.
(A): Perpendicular to the plane of the cervical spinal cord
(B): Parallel to the plane of the cervical spinal cord¬†
(C): 45[sup]0[/sup] to the plane of the cervical spinal cord¬†
(D): Orthogonal to the axial plane
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): There are ____________ vertebral bodies in the thoracic spine
(A): 7
(B): 10
(C): 5
(D): 12
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The landmark for the thoracic spine is the _______________.
(A): Superior segment of the sternum
(B): Mid sternum
(C): Inferior segment of the sternum
(D): Larynx¬†
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The landmark for the lumbar spine is at ________________.
(A): The inferior segment of the sternum
(B): The iliac crest
(C): The symphysis pubis
(D): 1‚Äù-2‚Äù above the iliac crest
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The Sagittal coverage for the lumbar spine is:
(A): All of T12 and includes all S1
(B): All of L1 and incudes all of S2
(C): All of L1 and includes all of S1
(D): All of T12 and includes the L5-S1 disc space
(Correct): A
(Points): 1


(Type): matching
(Matching style): 0
(Points style): 0
(Random matches): 0
(Question): [cmimg]0/10742032_TNJF0ZXE.png[/cmimg]Label the areas:¬†
(A Clue): 1
(A Match): Corpus callosum
(B Clue): 2
(B Match): Thalamus
(C Clue): 3
(C Match): Pons
(D Clue): 4
(D Match): Cerebellum
(Category): 18
(Grade style): 0
(Points): 1


(Type): matching
(Matching style): 0
(Points style): 0
(Random matches): 0
(Question): [cmimg]0/10742032_7HYOGSLT.png[/cmimg]Label the areas:¬†
(A Clue): 1
(A Match): C2
(B Clue): 2
(B Match): C4-C5 Disc
(C Clue): 3
(C Match): Spinal Cord
(D Clue): 4
(D Match): Spinous Process
(Category): 18
(Grade style): 0
(Points): 1


(Type): matching
(Matching style): 0
(Points style): 0
(Random matches): 0
(Question): [cmimg]0/10742032_T0EIXV4L.png[/cmimg]Label the Areas
(A Clue): 1
(A Match): Vertebral body
(B Clue): 2
(B Match): Spinal Cord
(C Clue): 3
(C Match): Transverse Process
(Category): 18
(Grade style): 0
(Points): 1


(Type): matching
(Matching style): 0
(Points style): 0
(Random matches): 0
(Question): [cmimg]0/10742032_KB45918J.png[/cmimg]Label the Areas:
(A Clue): 1
(A Match): Conus Medullaris
(B Clue): 2
(B Match): Abdominal Aorta
(C Clue): 3
(C Match): L3 Vertebral Body
(D Clue): 4
(D Match): L5-S1 disc space
(Category): 18
(Grade style): 0
(Points): 1


(Type): multiplechoice
(Category): 18
(Random answers): 0
(Question): The typical angulation for axial imaging of the brain is parallel to the
________________.
(A): Foramen Magnum
(B): Anterior Commissure-Posterior Commissure (ACPC) line
(C): Nasion
(D): Glabella
(Correct): B
(Points): 1



**Document URL:**

---

## Optional Notes

---

## What Happens Next

Give this to the AI and it will automatically do everything!

---

## AI PROCESSING INSTRUCTIONS (For the AI Assistant)

When a user provides a filled-out template, follow these steps IN ORDER:

### Step 1: Parse & Understand
1. Read the filled template carefully
2. Identify what content types exist (video/quiz/document)
3. Note the target section and position
4. Check if there are any special notes

### Step 2: Query Existing Structure
1. Check the database for existing sections and their IDs
2. Query all modules in the target section to determine order_index
3. If position is "first", set order_index = 1
4. If position is "after [module name]", find that module's order_index and add 1
5. If position is "at the end", find max order_index and add 1

### Step 3: Generate Module Details
1. **Create slug**: Convert module name to lowercase-kebab-case
2. **Write description**: Create compelling 1-2 sentence description of what students will learn
3. **Choose icon**: Pick a perfect emoji that represents the topic
4. **Set published**: Default to true unless user specified otherwise

### Step 4: Process Content Items
For each content type present:

**If Video:**
- Generate video title (based on module name if not provided)
- Create description
- Set type: "video"
- Create slug: "introduction" or meaningful name
- Store video URL in metadata.videoUrl
- Set order_index: 1

**If Quiz:**
- Parse questions from ANY format provided
- Intelligently detect: question text, answers, correct answer, explanations
- If multiple choice: extract options A/B/C/D
- If true/false: detect boolean questions
- Generate question IDs (slugs)
- Create JSON structure with proper format
- Determine if multiple quiz sections needed (or just one)
- Create quiz slugs: "fundamentals", "basics", etc.
- Set order_index appropriately
- **IMPORTANT**: Generate hints and explanations in this EXACT style:

**NOTE:** These examples show the database structure. Parse user's messy input and transform it into this format for SQL INSERT statements.

**MULTIPLE CHOICE EXAMPLE (Database Format):**
```json
{
  "question_id": "suf-8",
  "question_type": "multiplechoice",
  "question_text": "The suffix \"-megaly\" means:",
  "answers": {
    "A": "Pain",
    "B": "Inflammation",
    "C": "Disease",
    "D": "Enlargement"
  },
  "correct_answer": "D",
  "hint": "Think MEGA - like mega-size, mega-big!",
  "explanation": "**-megaly** means **enlargement** or **abnormally large** üìè\n\nüí° **Remember it:** -MEGALY starts with MEGA - like MEGA-SIZE at McDonald's, or MEGA-blocks - it means BIG! Cardiomegaly = enlarged heart. Hepatomegaly = enlarged liver. Splenomegaly = enlarged spleen. Whenever you see -MEGALY, something grew too BIG, like it got MEGA-SIZED!"
}
```

**TRUE/FALSE EXAMPLE (Database Format):**
```json
{
  "question_id": "suf-17",
  "question_type": "truefalse",
  "question_text": "The suffix \"-lysis\" means hardening.",
  "answers": {
    "A": "True",
    "B": "False"
  },
  "correct_answer": "B",
  "hint": "Think of Listerine dissolving plaque - breaking things DOWN!",
  "explanation": "**FALSE!** ‚ùå **-lysis** means **breakdown** or **destruction**, NOT hardening!\n\nüí° **Remember it:** -LYSIS sounds like 'LIES-IS' (falling apart)! Think of things DISSOLVING, BREAKING DOWN, LOOSENING! Hemolysis = breakdown of red blood cells. Dialysis = breaking down/filtering waste from blood. Paralysis = breakdown of muscle function. The opposite of hardening - it's about things FALLING APART or being DESTROYED!",
  "image_url": null
}
```

**EXAMPLE WITH IMAGE (Anatomy/MRI Scan Question):**
```json
{
  "question_id": "neuro-brain-anatomy-1",
  "question_type": "multiplechoice",
  "question_text": "What structure is indicated by the arrow in this sagittal brain MRI?",
  "answers": {
    "A": "Cerebellum",
    "B": "Medulla oblongata",
    "C": "Pons",
    "D": "Thalamus"
  },
  "correct_answer": "A",
  "hint": "Look at the posterior fossa - it's the largest structure there!",
  "explanation": "**Cerebellum** - the little brain! üß†\n\nüí° **Remember it:** CEREBELLUM = 'little brain' in Latin. It sits in the posterior fossa (back of skull) below the occipital lobes. It's responsible for coordination, balance, and fine motor control. On sagittal MRI, it has a characteristic 'tree-like' appearance called the arbor vitae (tree of life)!",
  "image_url": "https://cffhrzzfhyotkbuuoayc.supabase.co/storage/v1/object/public/quiz-images/brain-sagittal-cerebellum.jpg"
}
```

**STYLE GUIDELINES:**
- **Hints**: Short, memorable, relatable (use everyday comparisons, wordplay, mnemonics)
- **Explanations**: 
  - Start with bold definition and emoji
  - Add "üí° **Remember it:**" section with creative memory aids
  - Use real-world examples (McDonald's, brands, everyday objects)
  - Include clinical examples when relevant
  - Use formatting: **bold**, CAPS for emphasis
  - Make it FUN and MEMORABLE - like teaching a friend!
- **Images**: 
  - Set `image_url` to `null` if no image needed (most questions)
  - Use Supabase Storage URLs when images are provided
  - Common use cases: anatomical diagrams, MRI scans, positioning photos, equipment images
  - Images will display above the question text in the quiz interface

**If Document:**
- Generate document title
- Create description
- Set type: "document"
- Create slug
- Store URL in metadata.documentUrl
- Set order_index appropriately

### Step 5: Create SQL Migration File
Generate a new migration file: `XXX_add_[module-slug]_module.sql`

Include:
```sql
-- Get section ID
DO $$
DECLARE
  v_section_id UUID;
  v_module_id UUID;
  v_video_content_id UUID;
  v_quiz_content_id UUID;
BEGIN
  -- Get section ID
  SELECT id INTO v_section_id FROM sections WHERE slug = '[section-slug]';
  
  -- Insert module
  INSERT INTO modules (section_id, slug, title, description, icon, order_index, is_published, is_locked)
  VALUES (v_section_id, '[module-slug]', '[Module Name]', '[Description]', '[Emoji]', [order_index], true, false)
  RETURNING id INTO v_module_id;
  
  -- Insert video content (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, 'introduction', '[Video Title]', '[Description]', 'video', 'üé•', 1, '{"videoUrl": "[URL]"}', true)
  RETURNING id INTO v_video_content_id;
  
  -- Insert quiz content (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, '[quiz-slug]', '[Quiz Title]', '[Description]', 'quiz', 'üìù', 2, '{}', true)
  RETURNING id INTO v_quiz_content_id;
  
  -- Insert or update quiz_sections (IMPORTANT: Do this BEFORE inserting questions!)
  INSERT INTO quiz_sections (key, title, description, icon, order_index)
  VALUES ('[quiz-slug]', '[Quiz Section Title]', '[Description]', 'üìù', 0)
  ON CONFLICT (key) DO UPDATE SET
    title = EXCLUDED.title,
    description = EXCLUDED.description,
    icon = EXCLUDED.icon,
    order_index = EXCLUDED.order_index,
    updated_at = NOW();
  
  -- Insert quiz questions (WITH hints, explanations, and optional images!)
  INSERT INTO quiz_questions (
    content_item_id, 
    question_id, 
    section_key, 
    question_type, 
    question_text, 
    answers, 
    correct_answer, 
    points, 
    order_index, 
    hint, 
    explanation,
    image_url
  ) VALUES 
    (v_quiz_content_id, 'question-1', '[quiz-slug]', 'multiplechoice', 'What is...?', '{"A": "Option A", "B": "Option B", "C": "Option C", "D": "Option D"}', 'A', 1, 0, 'Think about...', '**Answer** means XYZ üéØ\n\nüí° **Remember it:** Use a fun mnemonic here!', null),
    (v_quiz_content_id, 'question-2', '[quiz-slug]', 'truefalse', 'The term means hardening.', '{"A": "True", "B": "False"}', 'B', 1, 1, 'Remember the suffix!', '**FALSE!** ‚ùå It actually means...\n\nüí° **Remember it:** Creative memory aid here!', null),
    (v_quiz_content_id, 'question-3', '[quiz-slug]', 'multiplechoice', 'What structure is indicated by the arrow?', '{"A": "Cerebellum", "B": "Medulla", "C": "Pons", "D": "Thalamus"}', 'A', 1, 2, 'Look at the posterior fossa!', '**Cerebellum** - the little brain! üß†\n\nüí° **Remember it:** CEREBELLUM = "little brain" in Latin. It''s in the back (posterior fossa) and controls coordination and balance!', 'https://xyz.supabase.co/storage/v1/object/public/quiz-images/brain-sagittal.jpg')
    -- ... more questions with FULL hints, explanations, and image_url (use null if no image)
  ;
  
  -- Insert document (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, 'reading', '[Doc Title]', '[Description]', 'document', 'üìÑ', 3, '{"documentUrl": "[URL]"}', true);
  
END $$;
```

**CRITICAL REMINDERS:**
- Always escape single quotes in text fields: `It''s` not `It's`
- Insert quiz_sections BEFORE quiz_questions (foreign key constraint!)
- Use proper JSON format for answers: `'{"A": "text", "B": "text"}'`
- Include hint and explanation for EVERY question
- Use `\n\n` for line breaks in explanations
- Variable names must use underscores not hyphens: `v_quiz_content_id` not `v_quiz-content-id`
- Include `image_url` column in INSERT statements (set to `null` if no image)

### Step 6: Execute Migration
1. Save the SQL migration file
2. Ask user to confirm before running
3. Run the migration: Connect to Supabase and execute SQL
4. Verify: Query to confirm module, content_items, quiz_sections, and quiz_questions were created

### Step 7: Verify Everything Works
1. Check that module appears in sidebar
2. Verify video page loads (if exists)
3. Verify quiz page loads with questions FROM DATABASE (if exists)
4. Check server logs to confirm questions are loading from DB not JSON
5. Verify document page loads (if exists)
6. Test navigation between content items
7. Confirm progress tracking works in admin dashboard

### Step 8: Report Back
Provide summary:
- ‚úÖ Module created: [name]
- ‚úÖ Position: [section] at order_index [X]
- ‚úÖ Content items: [list with types]
- ‚úÖ Quiz questions: [count] (stored in database with hints/explanations)
- ‚úÖ Migration file: [filename]
- ‚úÖ Database verified: quiz_sections + quiz_questions populated
- ‚úÖ All verified and working!

---

**IMPORTANT REMINDERS FOR AI:**
- Always use UUIDs properly with gen_random_uuid()
- Always check existing order_index values before assigning
- Parse quiz questions intelligently - handle messy formatting
- Generate meaningful slugs (lowercase-kebab-case)
- Create proper metadata JSON for videos/documents
- **NO JSON FILES NEEDED** - All quiz data goes directly into the database (quiz_sections + quiz_questions tables)
- Include hints and explanations for EVERY quiz question in the fun, memorable style shown above
- Verify quiz questions load from database (check server logs for "‚úÖ [DB SUCCESS]")
- Test everything before confirming completion
- If anything is unclear, ASK the user before proceeding

