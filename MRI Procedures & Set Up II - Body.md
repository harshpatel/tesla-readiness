# Module Creation Template

> **Instructions:** Just fill in the basics below. The AI will figure out everything else (descriptions, icons, positioning, formatting, etc.)

---

## Required Info

**Module Name:**
MRI Procedures & Set Up II - Body
**Section:**
Phase 1

**Position:**
After MRI Procedures & Set Up I
**Video URL:**
https://cffhrzzfhyotkbuuoayc.supabase.co/storage/v1/object/public/videos/MRI%20Procedures%20&%20Set%20Up%20II%20-%20Body.mp4

**Quiz Questions:**
(Note: For questions with images, use format: https://0cm.classmarker.com/10742032_TNJF0ZXE.png - replace the slug with what's referenced in [cmimg] tags)
(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): An image that is T1 Weighted means that T1 contrast is maximized
and ___________________ are minimized.
(A): T2 and Proton Density contrast
(B): T1 and T2 are minimized contrast
(C): 1.5T and 3.0T effects
(D): Artifacts
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Proton Density Weighting means the predominant contrast is based
on:
(A): A combination of T1 and T2
(B): T1 contrast
(C): T2 contrast
(D): The difference between number of hydrogen-based protons in the
tissues being imaged
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 0
(Question): MSK imaging can be challenging because it requires
________________.
(A): High spatial resolution
(B): High signal-to-noise ration
(C): Precise positioning
(D): All the above
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Indications for MRI of the knee include all the following expect_____.
(A): Internal derangement
(B): Torn meniscus
(C): Hip Pain
(D): Tendon/Ligament tears
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Landmarking for a knee MRI is:
(A): At the lateral femoral condyle
(B): Parallel to both femoral condyles
(C): At the base of the patella
(D): At the apex of the patella
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The axial coverage for a knee MRI is from the __________________.
(A): Top of the patella through the joint space
(B): Inferior half of the femur to the superior half of the tibia
(C): Top of the patella to the patellar tendon insertion
(D): Mid patella through the lateral femoral condyle
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): For a sagittal of the knee, angle ____________.
(A): Parallel to the plane of the femoral condyles
(B): Perpendicular to the plane of the femoral condyles
(C): To the plane of the femur
(D): To the plane of the tibia
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Indications for MRI of the Hip include all the following except for
____________.
(A): Generalized pain
(B): Degenerative Joint Disease (DJD)
(C): Incontinence
(D): Avascular necrosis
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The landmark for a hip MRI is the _________________.
(A): Greater Trochanter
(B): Symphysis pubis
(C): Iliac crest
(D): ¬Ω between the iliac crest and the symphysis pubis
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The coronal coverage for the hip is from the ___________________.
(A): Iliac crest through the symphysis pubis
(B): Ramus through the symphysis pubis
(C): Hamstring insertion through the acetabulum
(D): Ramus through the acetabulum
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The axial coverage for the hip is from ____________________.
(A): Above the acetabulum through the entire greater trochanter
(B): The iliac crest through the entire greater trochanter
(C): Above the acetabulum through the symphysis pubis
(D): The iliac crest through the symphysis pubis
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): [cmimg]0/10742032_6YCKGTBN.png[/cmimg]
Refer to above picture for questions 16-19
Label 1:
(A): Obturator internus T.
(B): Femoral head
(C): Labrum
(D): Ramus
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 2:
(A): Ligamentum teres
(B): Obturator internus T.
(C): Labrum
(D): Femoral head
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 3:
(A): Ligamentum teres
(B): Obturator internus T.
(C): Labrum
(D): Ramus
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 4:
(A): Ligamentum teres
(B): Obturator internus T.
(C): Labrum
(D): Femoral neck
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): [cmimg]0/10742032_TMKX8DSA.png[/cmimg]
Refer to above picture for questions 8-11
Label 1:
(A): Patella
(B): Anterior Cruciate L.
(C): Patellar tendon
(D): Quadriceps Tendon
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 2:
(A): Quadriceps Tendon
(B): Anterior Cruciate L.
(C): Patellar tendon
(D): Tibia
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 3:
(A): Popliteal artery
(B): Quadriceps Tendon
(C): Anterior Cruciate L.
(D): Patellar tendon
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): [cmimg]0/10742032_TMKX8DSA.png[/cmimg]
Label 4:
(A): Femur
(B): Tibia
(C): Patellar tendon
(D): Patella
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Indications for a shoulder MRI include all the following expect
_______.
(A): Post operative follow up
(B): Chest Pain
(C): Tumor
(D): Trauma
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Which of the following is the only indication for an MRI of the
shoulder?
(A): Neck pain
(B): Headache
(C): Meniscal tear
(D): Rotator cuff tear
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): When positioning a shoulder, the landmark is the _______________.
(A): Humeral head
(B): Superior aspect of the sternum
(C): Clavicle
(D): Mid-humeral shaft
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): When positioning the shoulder, move the patient as far as possible to:
(A): The affected side
(B): The unaffected side
(C): Wherever the patient is most comfortable
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): When positioning the shoulder, the humerus and forearm should be:
(A): In the same plane as the shoulder
(B): Slightly anterior to the shoulder
(C): Slightly posterior to the shoulder
(D): Left in the most comfortable position for the patient
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The angulation for the oblique coronal plane of the shoulder is
parallel to the____________________.
(A): Biceps tendon
(B): Supraspinatus tendon
(C): Infraspinatus tendon
(D): Angle of the glenoid
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The coverage for an axial of the shoulder must also include the
entire:
(A): Shoulder blade
(B): Acromial-Clavicular (AC) joint
(C): Sterna-Clavicular (SC) joint
(D): Superior half the humeral shaft
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): [cmimg]0/10742032_7DPB8HOD.png[/cmimg]
Refer to the above picture for questions 27-30
Label 1:
(A): Humeral head
(B): Glenoid
(C): Acromion process
(D): Labrum
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 2:
(A): Acromion process
(B): Labrum
(C): Biceps tendon
(D): Glenoid
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 3:
(A): Acromion process
(B): Labrum
(C): Biceps tendon
(D): Glenoid
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 4:
(A): Acromion process
(B): Labrum
(C): Biceps tendon
(D): Glenoid
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): [cmimg]0/10742032_RWBDRCG9.png[/cmimg]
The arrow identifies:
(A): Humeral head
(B): Glenoid
(C): Biceps tendon
(D): Supraspinatus tendon
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The elbow is comprised of the following bones:
(A): Humerus, Ulna, Tibia
(B): Ulna, Radius, Capitate
(C): Radius, Ulna, Shoulder
(D): Humerus, Ulna, Radius
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): An advantage for positioning the elbow by the side is greater patient
comfort. A disadvantage is_________________:
(A): Higher SAR
(B): Respiratory motion artifacts
(C): Lower magnetic field homogeneity
(D): Longer scan times
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The landmark for the elbow is:
(A): Mid humerus
(B): Mid radius
(C): Mid ulna
(D): Center of the elbow
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): For elbow imaging, it is essential to include the________________.
(A): Triceps muscle
(B): Biceps muscle
(C): Biceps tendon insertion
(D): Triceps ligament insertion
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): The angulation for a sagittal elbow is__________________.
(A): Perpendicular to the plane of the lateral and medial condyles
(B): Parallel to the plane of the lateral and medial condyles
(C): Parallel to the plane of the humeral shaft
(D): Perpendicular to the plane of the humeral shaft
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): [cmimg]0/10742032_KAJK0HNL.png[/cmimg]
Refer to the above picture for questions 37-40
Label 1:
(A): Biceps tendon insertion
(B): Trochlea
(C): Olecranon process
(D): Triceps tendon
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 2:
(A): Biceps tendon insertion
(B): Trochlea
(C): Olecranon process
(D): Triceps tendon
(Correct): C
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 3:
(A): Biceps tendon insertion
(B): Trochlea
(C): Olecranon process
(D): Triceps tendon
(Correct): B
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Label 4:
(A): Biceps tendon insertion
(B): Trochlea
(C): Olecranon process
(D): Triceps tendon
(Correct): A
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Which indication is specific only to wrist MRI?
(A): Degenerative joint disease (DJD)
(B): Arthritis
(C): Trauma
(D): Carpel tunnel syndrome
(Correct): D
(Points): 1


(Type): multiplechoice
(Category): 19
(Random answers): 1
(Question): Landmark the wrist at ________________.
(A): ¬Ω‚Äù distal to the wrist joint at the capitate bone
(B): 1‚Äù proximal to the wrist joint at the capitate bone
(C): The wrist joint
(D): The center of the metacarpal bones
(Correct): A
(Points): 1




**Document URL:**

---

## Optional Notes

---

## What Happens Next

Give this to the AI and it will automatically do everything!

---

## AI PROCESSING INSTRUCTIONS (For the AI Assistant)

When a user provides a filled-out template, follow these steps IN ORDER:

### Step 1: Parse & Understand
1. Read the filled template carefully
2. Identify what content types exist (video/quiz/document)
3. Note the target section and position
4. Check if there are any special notes

### Step 2: Query Existing Structure
1. Check the database for existing sections and their IDs
2. Query all modules in the target section to determine order_index
3. If position is "first", set order_index = 1
4. If position is "after [module name]", find that module's order_index and add 1
5. If position is "at the end", find max order_index and add 1

### Step 3: Generate Module Details
1. **Create slug**: Convert module name to lowercase-kebab-case
2. **Write description**: Create compelling 1-2 sentence description of what students will learn
3. **Choose icon**: Pick a perfect emoji that represents the topic
4. **Set published**: Default to true unless user specified otherwise

### Step 4: Process Content Items
For each content type present:

**If Video:**
- Generate video title (based on module name if not provided)
- Create description
- Set type: "video"
- Create slug: "introduction" or meaningful name
- Store video URL in metadata.videoUrl
- Set order_index: 1

**If Quiz:**
- Parse questions from ANY format provided
- Intelligently detect: question text, answers, correct answer, explanations
- If multiple choice: extract options A/B/C/D
- If true/false: detect boolean questions
- Generate question IDs (slugs)
- Create JSON structure with proper format
- Determine if multiple quiz sections needed (or just one)
- Create quiz slugs: "fundamentals", "basics", etc.
- Set order_index appropriately
- **IMPORTANT**: Generate hints and explanations in this EXACT style:

**NOTE:** These examples show the database structure. Parse user's messy input and transform it into this format for SQL INSERT statements.

**MULTIPLE CHOICE EXAMPLE (Database Format):**
```json
{
  "question_id": "suf-8",
  "question_type": "multiplechoice",
  "question_text": "The suffix \"-megaly\" means:",
  "answers": {
    "A": "Pain",
    "B": "Inflammation",
    "C": "Disease",
    "D": "Enlargement"
  },
  "correct_answer": "D",
  "hint": "Think MEGA - like mega-size, mega-big!",
  "explanation": "**-megaly** means **enlargement** or **abnormally large** üìè\n\nüí° **Remember it:** -MEGALY starts with MEGA - like MEGA-SIZE at McDonald's, or MEGA-blocks - it means BIG! Cardiomegaly = enlarged heart. Hepatomegaly = enlarged liver. Splenomegaly = enlarged spleen. Whenever you see -MEGALY, something grew too BIG, like it got MEGA-SIZED!"
}
```

**TRUE/FALSE EXAMPLE (Database Format):**
```json
{
  "question_id": "suf-17",
  "question_type": "truefalse",
  "question_text": "The suffix \"-lysis\" means hardening.",
  "answers": {
    "A": "True",
    "B": "False"
  },
  "correct_answer": "B",
  "hint": "Think of Listerine dissolving plaque - breaking things DOWN!",
  "explanation": "**FALSE!** ‚ùå **-lysis** means **breakdown** or **destruction**, NOT hardening!\n\nüí° **Remember it:** -LYSIS sounds like 'LIES-IS' (falling apart)! Think of things DISSOLVING, BREAKING DOWN, LOOSENING! Hemolysis = breakdown of red blood cells. Dialysis = breaking down/filtering waste from blood. Paralysis = breakdown of muscle function. The opposite of hardening - it's about things FALLING APART or being DESTROYED!",
  "image_url": null
}
```

**EXAMPLE WITH IMAGE (Anatomy/MRI Scan Question):**
```json
{
  "question_id": "neuro-brain-anatomy-1",
  "question_type": "multiplechoice",
  "question_text": "What structure is indicated by the arrow in this sagittal brain MRI?",
  "answers": {
    "A": "Cerebellum",
    "B": "Medulla oblongata",
    "C": "Pons",
    "D": "Thalamus"
  },
  "correct_answer": "A",
  "hint": "Look at the posterior fossa - it's the largest structure there!",
  "explanation": "**Cerebellum** - the little brain! üß†\n\nüí° **Remember it:** CEREBELLUM = 'little brain' in Latin. It sits in the posterior fossa (back of skull) below the occipital lobes. It's responsible for coordination, balance, and fine motor control. On sagittal MRI, it has a characteristic 'tree-like' appearance called the arbor vitae (tree of life)!",
  "image_url": "https://cffhrzzfhyotkbuuoayc.supabase.co/storage/v1/object/public/quiz-images/brain-sagittal-cerebellum.jpg"
}
```

**STYLE GUIDELINES:**
- **Hints**: Short, memorable, relatable (use everyday comparisons, wordplay, mnemonics)
- **Explanations**: 
  - Start with bold definition and emoji
  - Add "üí° **Remember it:**" section with creative memory aids
  - Use real-world examples (McDonald's, brands, everyday objects)
  - Include clinical examples when relevant
  - Use formatting: **bold**, CAPS for emphasis
  - Make it FUN and MEMORABLE - like teaching a friend!
- **Images**: 
  - Set `image_url` to `null` if no image needed (most questions)
  - Use Supabase Storage URLs when images are provided
  - Common use cases: anatomical diagrams, MRI scans, positioning photos, equipment images
  - Images will display above the question text in the quiz interface

**If Document:**
- Generate document title
- Create description
- Set type: "document"
- Create slug
- Store URL in metadata.documentUrl
- Set order_index appropriately

### Step 5: Create SQL Migration File
Generate a new migration file: `XXX_add_[module-slug]_module.sql`

Include:
```sql
-- Get section ID
DO $$
DECLARE
  v_section_id UUID;
  v_module_id UUID;
  v_video_content_id UUID;
  v_quiz_content_id UUID;
BEGIN
  -- Get section ID
  SELECT id INTO v_section_id FROM sections WHERE slug = '[section-slug]';
  
  -- Insert module
  INSERT INTO modules (section_id, slug, title, description, icon, order_index, is_published, is_locked)
  VALUES (v_section_id, '[module-slug]', '[Module Name]', '[Description]', '[Emoji]', [order_index], true, false)
  RETURNING id INTO v_module_id;
  
  -- Insert video content (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, 'introduction', '[Video Title]', '[Description]', 'video', 'üé•', 1, '{"videoUrl": "[URL]"}', true)
  RETURNING id INTO v_video_content_id;
  
  -- Insert quiz content (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, '[quiz-slug]', '[Quiz Title]', '[Description]', 'quiz', 'üìù', 2, '{}', true)
  RETURNING id INTO v_quiz_content_id;
  
  -- Insert or update quiz_sections (IMPORTANT: Do this BEFORE inserting questions!)
  INSERT INTO quiz_sections (key, title, description, icon, order_index)
  VALUES ('[quiz-slug]', '[Quiz Section Title]', '[Description]', 'üìù', 0)
  ON CONFLICT (key) DO UPDATE SET
    title = EXCLUDED.title,
    description = EXCLUDED.description,
    icon = EXCLUDED.icon,
    order_index = EXCLUDED.order_index,
    updated_at = NOW();
  
  -- Insert quiz questions (WITH hints, explanations, and optional images!)
  INSERT INTO quiz_questions (
    content_item_id, 
    question_id, 
    section_key, 
    question_type, 
    question_text, 
    answers, 
    correct_answer, 
    points, 
    order_index, 
    hint, 
    explanation,
    image_url
  ) VALUES 
    (v_quiz_content_id, 'question-1', '[quiz-slug]', 'multiplechoice', 'What is...?', '{"A": "Option A", "B": "Option B", "C": "Option C", "D": "Option D"}', 'A', 1, 0, 'Think about...', '**Answer** means XYZ üéØ\n\nüí° **Remember it:** Use a fun mnemonic here!', null),
    (v_quiz_content_id, 'question-2', '[quiz-slug]', 'truefalse', 'The term means hardening.', '{"A": "True", "B": "False"}', 'B', 1, 1, 'Remember the suffix!', '**FALSE!** ‚ùå It actually means...\n\nüí° **Remember it:** Creative memory aid here!', null),
    (v_quiz_content_id, 'question-3', '[quiz-slug]', 'multiplechoice', 'What structure is indicated by the arrow?', '{"A": "Cerebellum", "B": "Medulla", "C": "Pons", "D": "Thalamus"}', 'A', 1, 2, 'Look at the posterior fossa!', '**Cerebellum** - the little brain! üß†\n\nüí° **Remember it:** CEREBELLUM = "little brain" in Latin. It''s in the back (posterior fossa) and controls coordination and balance!', 'https://xyz.supabase.co/storage/v1/object/public/quiz-images/brain-sagittal.jpg')
    -- ... more questions with FULL hints, explanations, and image_url (use null if no image)
  ;
  
  -- Insert document (if exists)
  INSERT INTO content_items (module_id, slug, title, description, type, icon, order_index, metadata, is_published)
  VALUES (v_module_id, 'reading', '[Doc Title]', '[Description]', 'document', 'üìÑ', 3, '{"documentUrl": "[URL]"}', true);
  
END $$;
```

**CRITICAL REMINDERS:**
- Always escape single quotes in text fields: `It''s` not `It's`
- Insert quiz_sections BEFORE quiz_questions (foreign key constraint!)
- Use proper JSON format for answers: `'{"A": "text", "B": "text"}'`
- Include hint and explanation for EVERY question
- Use `\n\n` for line breaks in explanations
- Variable names must use underscores not hyphens: `v_quiz_content_id` not `v_quiz-content-id`
- Include `image_url` column in INSERT statements (set to `null` if no image)

### Step 6: Execute Migration
1. Save the SQL migration file
2. Ask user to confirm before running
3. Run the migration: Connect to Supabase and execute SQL
4. Verify: Query to confirm module, content_items, quiz_sections, and quiz_questions were created

### Step 7: Verify Everything Works
1. Check that module appears in sidebar
2. Verify video page loads (if exists)
3. Verify quiz page loads with questions FROM DATABASE (if exists)
4. Check server logs to confirm questions are loading from DB not JSON
5. Verify document page loads (if exists)
6. Test navigation between content items
7. Confirm progress tracking works in admin dashboard

### Step 8: Report Back
Provide summary:
- ‚úÖ Module created: [name]
- ‚úÖ Position: [section] at order_index [X]
- ‚úÖ Content items: [list with types]
- ‚úÖ Quiz questions: [count] (stored in database with hints/explanations)
- ‚úÖ Migration file: [filename]
- ‚úÖ Database verified: quiz_sections + quiz_questions populated
- ‚úÖ All verified and working!

---

**IMPORTANT REMINDERS FOR AI:**
- Always use UUIDs properly with gen_random_uuid()
- Always check existing order_index values before assigning
- Parse quiz questions intelligently - handle messy formatting
- Generate meaningful slugs (lowercase-kebab-case)
- Create proper metadata JSON for videos/documents
- **NO JSON FILES NEEDED** - All quiz data goes directly into the database (quiz_sections + quiz_questions tables)
- Include hints and explanations for EVERY quiz question in the fun, memorable style shown above
- Verify quiz questions load from database (check server logs for "‚úÖ [DB SUCCESS]")
- Test everything before confirming completion
- If anything is unclear, ASK the user before proceeding

